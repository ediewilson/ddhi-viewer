/**
 * RWD reflow table switch for mobile UI/UX by collapsing columns
 * 
 * @author  Nick Tsai <myintaer@gmail.com>
 * @version 1.0.0
 * @see     https://github.com/yidas/jquery-reflow-table
 */
!function(t,i){"use strict";var e=0,s=function(i,e){return this.$table=t(i).first(),this.options=e||{},this.namespace,this.thead,this.autoWidth,this.widthRatio,this.widthSize,this.className="reflow-table",this.mobileModeClassName="reflow-table-mobile-mode",this.titleAttr="data-th",this.widthRatioClassName,this.widthWidthClassName,this.eventMobileOn="reflow-table.mobile.on",this.eventMobileOff="reflow-table.mobile.off",this.init(),this};s.prototype.init=function(){var s=function(){var t;return(t=(t=(this.$table.data(this.className)||{}).namespace||null)||this.$table.attr("id"))||(e+=1,t=this.className+"-"+e),t}.bind(this),h=function(){var t=this.options;this.namespace=this.options.namespace||s(),this.thead=this.options.thead||this.$table.find("thead"),this.autoWidth=void 0!==t.autoWidth?t.autoWidth:736,this.widthRatio=void 0!==t.widthRatio?t.widthRatio:"50",this.widthSize=void 0!==t.widthSize&&t.widthSize,this.widthRatioClassName=this.className+"-w-"+this.widthRatio,this.widthWidthClassName=this.className+"-"+this.widthSize,this.$table.data(this.className,this.options)}.bind(this),o=function(){return this.options=this.$table.data(this.className)||{},h(),this.options}.bind(this);if(!this.$table.length)throw"No element selected";if(!this.$table.is("table"))throw"The element must be a table dom";if("update"===this.options)return o(),this.update();if(h(),this.destroy(),this.build(),"function"==typeof this.options.eventMobileOn&&this.$table.on(this.eventMobileOn,this.options.eventMobileOn),"function"==typeof this.options.eventMobileOff&&this.$table.on(this.eventMobileOff,this.options.eventMobileOff),this.$table.addClass(this.className),this.widthRatio&&this.$table.addClass(this.widthRatioClassName),this.widthSize&&this.$table.addClass(this.widthWidthClassName),this.autoWidth){var a=this;t(i).on("resize."+a.namespace,function(){t(i).width()<=a.autoWidth?a.mobileMode(!0):a.mobileMode(!1)}),t(i).trigger("resize."+this.namespace)}},s.prototype.build=function(){var i=this.$table,e=this.titleAttr;return t(this.thead).find("th").each(function(s,h){i.find("tbody tr td:nth-child("+(s+1)+")").attr(e,t(h).text())}),this},s.prototype.mobileMode=function(i){i=void 0===i||i;var e=this.isMobileMode();return i?(this.$table.addClass(this.mobileModeClassName),e||this.$table.trigger(t.Event(this.eventMobileOn))):(this.$table.removeClass(this.mobileModeClassName),e&&this.$table.trigger(t.Event(this.eventMobileOff))),this},s.prototype.switchMode=function(){return this.isMobileMode()?this.mobileMode(!1):this.mobileMode(!0),this},s.prototype.isMobileMode=function(){return!!this.$table.hasClass(this.mobileModeClassName)},s.prototype.update=function(){return this.build(),this},s.prototype.unbind=function(){return t(i).off("resize."+this.namespace),this.$table.off(),this},s.prototype.destroy=function(){this.unbind(),this.mobileMode(!1),this.$table.removeClass(this.className),this.widthRatio&&this.$table.removeClass(this.widthRatioClassName),this.widthSize&&this.$table.removeClass(this.widthWidthClassName)},i.ReflowTable=s,t.fn.reflowTable=function(t){if(1===this.length)return new s(this,t);if(this.length>1){var i=[];return this.each(function(){i.push(new s(this,t))}),i}return!1}}(jQuery,window);